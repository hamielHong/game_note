数据回写
===

关于玩家数据回写数据库

不要定时回写
---

这里的定时回写是指，把回写方法放在游戏定时器中，会造成到达定时时间时，所有玩家的数据一起回写，瞬时的数据库压力巨大。

关于回写的思考
---

回写数据库是经常要做的操作，分为几个等级讨论

1. 实时级

    有一些操作是必须要实时回写数据库的，一般是涉及到钱的操作，如充值，消费等，这类数据优先级最高，如果不实时回写到数据库，出了问题难以解决。

2. 定时级

    对于优先级没那么高的操作，一般可以用定时回写来解决，如游戏内拾取的物品，装备进阶等等。

3. 下线级

    优先级最低，下线的时候回写数据

写数据库的程序实践
---

现有程序中写数据库经常出现，一段代码中要多次操作数据库，比如说foreach数据然后写入数据库，这些应该要考虑压缩到一次数据库连接中，每一次执行语句都会获取一次数据库连接。